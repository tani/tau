:stem: latex

++++
<div align="center">
<h1>TauLISP <small>by @tani</small></h1>
<a href="https://github.com/tani/tau">ğŸŒŸ GitHub Star</a>
<a href="https://github.com/sponsors/tani">â¤ï¸ GitHub Sponsors</a>
</div>
++++

== æ¦‚è¦

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯å˜ç´”å‹ä»˜ããƒ©ãƒ ãƒ€è¨ˆç®—ã®å‹ç†è«–ã«åŸºã¥ã„ãŸ LISPã®é–‹ç™ºã§ã‚ã‚‹ï¼
ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã®å‹æ¤œæŸ»ã®å‹•ä½œã«ã¤ã„ã¦æ•™è‚²ã™ã‚‹ãŸã‚ã«é–‹ç™ºã•ã‚Œã¦ã„ã‚‹ï¼
å‹æ¤œæŸ»ã¯ã™ã¹ã¦å®Ÿè¡Œå‰æ®µéšã§è¡Œã‚ã‚Œï¼Œå‹æ¤œæŸ»ã«æˆåŠŸã—ãŸã‚³ãƒ¼ãƒ‰ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªRacket ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¾Œï¼Œå®Ÿè¡Œã•ã‚Œã‚‹ï¼
ã“ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’é€šã˜ã¦å‹æ¤œæŸ»ã¨è«–ç†å­¦ã®é–¢ä¿‚æ€§ï¼Œè¨€èªå‡¦ç†ç³»å†…éƒ¨ã®å‹•ä½œã«ã¤ã„ã¦çŸ¥ã£ã¦ã„ãŸã ã‘ãŸã‚‰å¹¸ã„ã§ã‚ã‚‹ï¼

== ãƒ¢ãƒ¼ãƒ€ã‚¹ãƒãƒ¼ãƒãƒ³ã‚¹

æ—¥å¸¸ä¼šè©±ã§ã€Œæ˜æ—¥æ™´ã‚ŒãŸã‚‰æµ·ã«è¡Œã“ã†ï¼ã€ã¨ã„ã†æ–‡ã‚’è€ƒãˆã¦ã¿ã‚‹ï¼ã“ã®æ–‡ã¯å¤§ããåˆ†ã‘ã¦ã€Œæ˜æ—¥æ™´ã‚Œã‚‹ã€ã¨ã€Œæµ·ã«è¡Œã“ã†ã€ã¨ã„ã†å¥ã‹ã‚‰æ§‹æˆã•ã‚Œã¦ã„ã‚‹ï¼
ã“ã®äºŒã¤ã®å¥ã‚’ç¹‹ã„ã§ã„ã‚‹ã®ã¯ã€ŒãŸã‚‰ã€ã¨ã„ã†åŠ©å‹•è©ã€ŒãŸã€ã®ä»®å®šå½¢ã§ã‚ã‚‹ï¼
ã“ã®ã¨ãä»®å®šå½¢ã¯ä»®å®š(å‰ç¯€)ãŒæˆç«‹ã™ã‚‹ã¨ãçµè«–(å¾Œç¯€)ãŒæˆç«‹ã™ã‚‹ã“ã¨ã‚’æ„å‘³ã™ã‚‹è¡¨ç¾ã§ã‚ã‚‹ï¼

ã¨ã“ã‚ã§ï¼Œã“ã®ä»®å®šå½¢ã‚’æŠ½è±¡çš„ã«è¡¨ç¾ã™ã‚‹ã¨ä»®å®šã‚’ stem:[A] ï¼Œçµè«–ã‚’ stem:[B] ï¼Œ
åŠ©å‹•è©ã‚’ stem:[\rightarrow] ã§è¡¨ã—ã¦ stem:[A\rightarrow B] ã¨æ›¸ãï¼ ã“ã‚Œã‚’ã€Œ stem:[A] ãªã‚‰ã° stem:[B] ã€ã¨èª­ã‚€ï¼
ã“ã®ã¨ãï¼Œ stem:[A\rightarrow B] ã«å¯¾ã—ã¦ stem:[A] ãŒæˆç«‹ã™ã‚‹ã“ã¨ã§ stem:[A] ãŒæˆç«‹ã™ã‚‹ã“ã¨ã‚’ ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãï¼
[stem]
++++
\begin{prooftree}
\AXC{A}
\AXC{\(A\rightarrow B\)}
\BIC{B}
\end{prooftree}
++++
å†’é ­ã®ä¾‹ã«æˆ»ã‚‹ã¨ï¼Œã¾ãšã€Œæ˜æ—¥æ™´ã‚ŒãŸã‚‰æµ·ã«è¡Œã“ã†stem:[A\rightarrow B]ã€ã¨ã„ã†æ–‡ã«å¯¾ã—ã¦ã€Œæ˜æ—¥æ™´ã‚Œã‚‹ stem:[A]ã€ãŒæˆç«‹ã™ã‚‹ã“ã¨ã§ï¼Œ
ã€Œæµ·ã«è¡Œã stem:[B]ã€ãŒæˆç«‹ã™ã‚‹ã®ã§ï¼Œ ä¸Šè¨˜ã®å›³ãŒæ›¸ã‘ã‚‹ï¼
[stem]
++++
\begin{prooftree}
\AXC{æ˜æ—¥æ™´ã‚Œã‚‹ : A}
\AXC{æ˜æ—¥æ™´ã‚ŒãŸã‚‰æµ·ã«è¡Œã“ã† : \(A\rightarrow B\)}
\BIC{æµ·ã«è¡Œã : B}
\end{prooftree}
++++
ã“ã®ã‚ˆã†ã«ï¼Œ stem:[A] ã¨ stem:[A\rightarrow B] ã‹ã‚‰ stem:[B] ã‚’æˆç«‹ã•ã›ã‚‹ã“ã¨ã‚’è«–ç†å­¦ã§ã¯ãƒ¢ãƒ¼ãƒ€ã‚¹ãƒãƒ¼ãƒãƒ³ã‚¹ã¨è¨€ã†ï¼

== ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª tasm

LISP ã‚’ä¾‹ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã‚’è€ƒãˆã‚‹ã¨ï¼Œãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã«ã¯
é–¢æ•°ã¨ãƒã‚¯ãƒ­ã¨ï¼Œé–¢æ•°ã§ã‚‚ãƒã‚¯ãƒ­ã§ã‚‚ãªã„ï¼Œç‰¹æ®Šå½¢å¼ãŒå­˜åœ¨ã™ã‚‹ï¼
é–¢æ•°ã¨ã¯ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰åˆ¥ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½œã‚‹æ©Ÿèƒ½ã§ã‚ã‚Šï¼Œãƒã‚¯ãƒ­ã¨ã¯å¼ã‚’åˆ¥ã®å¼ã«å¤‰æ›ã™ã‚‹æ©Ÿèƒ½ã§ã‚ã‚‹ï¼
ã§ã¯ï¼Œç‰¹æ®Šå½¢å¼ã«ã¯ä½•ãŒã‚ã‚‹ã®ã‹ï¼ä¾‹ãˆã°ï¼Œé–¢æ•°å®šç¾©ï¼Œä»£å…¥ï¼Œæ¡ä»¶åˆ†å²ãªã©ã®åˆ¶å¾¡æ§‹é€ ãŒç‰¹æ®Šå½¢å¼ã¨å‘¼ã°ã‚Œã‚‹ï¼

é–¢æ•°ã¯å˜ç´”ã«ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰åˆ¥ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½œã‚‹æ©Ÿèƒ½ã§ã‚ã‚‹ã‹ã‚‰å‹ã‚’ä¸ãˆã‚‹ã®ã¯ç°¡å˜ã§ã‚ã‚‹ï¼
ã“ã“ã§ã¯ãƒã‚¯ãƒ­ã‚’æ‰±ã‚ãªã„ã®ã§ï¼Œç‰¹æ®Šå½¢å¼ã«å‹ã‚’ä¸ãˆã‚‹ã“ã¨ã‚’è€ƒãˆã‚‹ï¼

å‹æ¤œæŸ»ã‚’ã™ã‚‹ã«ã¯ï¼Œå…¨ã¦ã®ç‰¹æ®Šå½¢å¼ã«å¯¾ã—ã¦æ­£ã—ãå‹ã‚’ä¸ãˆã‚‹å¿…è¦ãŒã‚ã‚‹ï¼
ã—ã‹ã—ï¼Œæ•°å¤šã‚ã‚‹ç‰¹æ®Šå½¢å¼ã«ãã‚Œãã‚Œå‹ã‚’ä¸ãˆã¦ã„ã¦ã¯æ™‚é–“ãŒè¶³ã‚Šãªã„ï¼
ãã“ã§å„ç‰¹æ®Šå½¢å¼ã‚’ç­‰ä¾¡ãªåˆ¥ã®ã‚³ãƒ¼ãƒ‰ã«ç½®ãæ›ãˆã‚‹ã“ã¨ã§ï¼Œæœ€å°é™ã®ç‰¹æ®Šå½¢å¼ã ã‘ã§å‹æ¤œæŸ»ã‚’å®Ÿç¾ã™ã‚‹ï¼
ã“ã®ã¨ãï¼Œå‹æ¤œæŸ»ã‚’è¡Œã†å¯¾è±¡ã¨ãªã‚‹è¨€èªã‚’ tasm ã¨åä»˜ã‘ã‚‹ï¼ tasmã¯ï¼Œ
é–¢æ•°ã®ä»–ã«ç‰¹æ®Šå½¢å¼ã¨ã—ã¦ç„¡åé–¢æ•°ã¨æ¡ä»¶åˆ†å²ï¼Œä»£å…¥ãŒæ‰±ãˆã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã‚ã‚‹ï¼

tasm ã¯å››å‰‡æ¼”ç®—ã‚„ãƒªã‚¹ãƒˆæ“ä½œãªã©ã®åŸºæœ¬çš„ãªé–¢æ•°ã¯æ‰±ãˆã‚‹ï¼
ã“ã‚Œã‚‰ã®é–¢æ•°ã«ã¯äºˆã‚å‹ãŒä¸ãˆã‚‰ã‚Œã¦ã„ã‚‹ï¼

[source,lisp]
....
(* (+ 1 2) (/ 4 2))
(car (cons 1 2))
....

tasm ã¯æ¡ä»¶åˆ†å²ãŒæ‰±ãˆã‚‹ï¼

[source,lisp]
....
(IF (= x 1) 0 1)
....

tasm ã¯ä»£å…¥ãŒæ‰±ãˆã‚‹ï¼

[source,lisp]
....
(SET x 10)
....

tasm ã¯ç„¡åé–¢æ•°ã‚’ä½œã‚Œã‚‹ï¼ç‰¹ã«é–¢æ•°ã¯å‹å®£è¨€ã‚’æŒã¤ï¼
ä»¥ä¸‹ã®ä¾‹ã¯äºŒã¤ã®æ•°å€¤ã‚’å—ã‘å–ã‚Šï¼Œæ•°å€¤ã‚’è¿”ã™é–¢æ•°ã§ã‚ã‚‹ï¼

[source,lisp]
....
(FUN (number number -> number) (x y) (+ x y))
((FUN (number number -> number) (x y) (+ x y)) 1 2)
....

å½¢å¼çš„ãªå®šç¾©ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã‚ã‚‹ï¼ ã“ã“ã§ `*` ã¯ 0å›ä»¥ä¸Šã®ç¹°ã‚Šè¿”ã—ã‚’è¡¨ã‚ã—ã¦ã„ã‚‹ï¼

....
<expr> ::= <appl> | <cond> | <asgn> | <func> | <symb> | <numb>
<appl> ::= (<expr> <expr>*)
<cond> ::= (IF <expr> <expr> <expr>)
<asgn> ::= (SET <symb> <expr>)
<func> ::= (FUN <ftype> (<symb>*) <expr>*)
<symb> ::= alphebets, e.g., foo, bar, etc.
<numb> ::= numerical letters, e.g., 10, 12.02, etc.
<type> ::= <ftyp> | <atyp>
<ftyp> ::= (<type>* -> <type>)
<atyp> ::= alphabetical letters e.g., number, string, etc.
....

ä»¥ä¸Šã®å½¢å¼ã«å¯¾ã—ã¦æ­£ã—ãå‹ã‚’ä¸ãˆã‚‹ã“ã¨ã§ï¼Œå‹æ¤œæŸ»ã‚’è¡Œã†ï¼

== tasm ã®å‹æ¤œæŸ»

ã¾ãšã¯ç°¡å˜ãªä¾‹ `(+ 1 2)` ã®å‹æ¤œæŸ»ã‚’è€ƒãˆã‚‹ï¼ `+` ã®å‹ã¯ stem:[number\,number \rightarrow number]
ã¨ã—ã¦äºŒã¤ã® stem:[number] å‹ã®å€¤ã‚’å—ã‘å–ã‚Š stem:[number] å‹ã®å€¤ã‚’è¿”ã™ã‚ˆã†ãªå‹ã§ã‚ã‚‹ï¼
ãã—ã¦ï¼Œ`1` ã¨ `2` ã¯ã©ã¡ã‚‰ã‚‚ stem:[number] å‹ã§ã‚ã‚‹ã‹ã‚‰ï¼Œã“ã®é–¢æ•°å‘¼ã³å‡ºã—ã¯æ­£ã—ã„ã“ã¨ãŒè¨€ãˆã‚‹ï¼
ã“ã®ã¨ãçµ„ stem:[number\,number] ã¨ _ãªã‚‰ã°_ ã®å¼ stem:[number\,number \rightarrow number] ã‚’å—ã‘å–ã‚‹ã“ã¨ã§ï¼Œãƒ¢ãƒ¼ãƒ€ã‚¹ãƒãƒ¼ãƒãƒ³ã‚¹
ãŒæˆç«‹ã— çµè«– stem:[number] ã‚’å¾—ã¦ã„ã‚‹ã¨ã¿ãªã™ã“ã¨ãŒã§ãã‚‹ï¼

[stem]
++++
\begin{prooftree}
\AXC{1 : number}
\AXC{2 : number}
\AXC{+ : \(number\,number \rightarrow number\)}
\TIC{(+ 1 2) : number}
\end{prooftree}
++++

ã§ã¯ï¼Œå°‘ã—è¤‡é›‘ãªä¾‹ `(+ 1 (+ 2 3))` ã¯ã©ã†ã§ã‚ã‚ã†ã‹ï¼
ä»¥ä¸‹ã®å›³ã‹ã‚‰æ­£ã—ããƒ¢ãƒ¼ãƒ€ã‚¹ãƒãƒ¼ãƒãƒ³ã‚¹ãŒæˆç«‹ã—ã¦ã„ã‚‹ã“ã¨ãŒç¤ºã›ã‚‹ã€‚

[stem]
++++
\begin{prooftree}
\AXC{1 : number}
\AXC{2 : number}
\AXC{3 : number}
\AXC{+ : \(number\,number \rightarrow number\)}
\TIC{(+ 2 3): number}
\AXC{+ : \(number\,number \rightarrow number\)}
\TIC{(+ 1 (+ 2 3)) : number}
\end{prooftree}
++++

ã“ã®ã‚ˆã†ã«é–¢æ•°ã®é©ç”¨ã ã‘ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ç°¡å˜ã«å‹ã®æ¤œæŸ»ãŒè¡Œãˆã‚‹ã€‚
ä»–æ–¹ã§ä»£å…¥ã¨æ¡ä»¶åˆ†å²ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å‹ä»˜ã‘ã‚‰ã‚Œã‚‹ã€‚

[stem]
++++
\begin{prooftree}
\AXC{test : B}
\AXC{then : T}
\AXC{else : T}
\TIC{(IF test then else) : T}
\end{prooftree}
++++

[stem]
++++
\begin{prooftree}
\AXC{var : symbol}
\AXC{val : T}
\BIC{(SET var val) : T}
\end{prooftree}
++++


== ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª tau

== tau ã‹ã‚‰ tasm ã¸ã®ç¿»è¨³

== tasm ã‹ã‚‰ Racket ã¸ç¿»è¨³

== Racket ã§ã®å¿œç”¨

== æ”¯æ´

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æ”¯æ´ã—ã¦ãã ã•ã‚‹æ–¹ã¯ï¼Œæ˜¯é GitHub Sponsors
ã®ã”åˆ©ç”¨ã‚’ã”æ¤œè¨ãã ã•ã„ï¼

== è‘—ä½œæ¨©æƒ…å ±

Copyright 2021 TANIGUCHI Masaya. All rights reserved.

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ MIT ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®å…ƒã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ï¼
